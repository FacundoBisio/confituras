const translations = {
    es: {
        home: "mermeladas palmelita",
        products: "productos",
        our_products: "Nuestros Productos",
        about: "nosotros",
        contact: "contacto",
        news: "noticias",
        hero_title: "Maestros Confiteros",
        hero_subtitle: "Islas Canarias - Desde 1968",
        splash_welcome: "Bienvenido al Paraíso Natural",
        enter_site: "Entrar",
        intro_title: "Tradición y Sabor",
        intro_text: "Elaboramos nuestras mermeladas seleccionando las mejores frutas frescas de Canarias. Sin conservantes ni colorantes, solo fruta y azúcar para conseguir un sabor auténtico.",
        prod_kiwi: "Kiwi",
        prod_papaya_orange: "Papaya y Naranja",
        prod_papaya_orange_diet: "Papaya y Naranja (Diet)",
        prod_mango: "Mango",
        prod_guayaba: "Guayaba",
        prod_pina: "Piña",
        prod_fresa: "Fresa",
        prod_naranja: "Naranja",
        prod_pimiento: "Pimiento",
        prod_limon: "Limón",
        // Footer
        footer_contact: "Contacto",
        footer_distributors: "Distribuidores - Profesionales",
        footer_legal: "Aviso Legal",
        footer_copyright: "© 2026 Palmelitas Jams / Sitios recomendados jam.palmelita.com",
        // Contact Page
        contact_title: "¡Ponte en contacto con nosotros rellenando el formulario!",
        contact_email: "E-MAIL DE CONTACTO",
        contact_name: "NOMBRE",
        contact_message: "COMENTARIO",
        contact_submit: "ENVIAR",
        // News Page Items (Static for demo)
        news_1_title: "Palmelita seleccionada como producto local para Madrid Fusión 2023",
        news_1_meta: "Diario de Avisos",
        news_1_date: "Miércoles, 18 de enero de 2023",
        news_1_excerpt: "La gastronomía de Candelaria estará presente en Madrid Fusión...",
        news_2_title: "Palmelita seleccionada para Gran Feria de Alimentación de España El Corte Inglés",
        news_2_meta: "Diario Crítico, Salud y Consumo",
        news_2_date: "Miércoles, 04 de marzo de 2022",
        news_2_excerpt: "El Corte Inglés inaugura la Gran Feria de la Alimentación en el marco de su 75 Aniversario...",
        news_3_title: "«De Bajamar al corazón de Europa»",
        news_3_meta: "Diario de Avisos",
        news_3_date: "Domingo, 21 de junio de 2015",
        news_3_excerpt: "Confituras Palmelita da el salto a Alemania con unos productos de gran calidad...",
        news_4_title: "«Palmelita comienza a exportar sus confituras a Alemania»",
        news_4_meta: "La Opinión de Tenerife",
        news_4_date: "Viernes, 19 de junio de 2015",
        news_4_excerpt: "...Confituras Palmelita fue creada en 1968 por el maestro pastelero Werner Bittermann (1928-2014) en su pequeño obrador...",
        cofinance_text: "Proyecto cofinanciado por el Fondo Europeo de Desarrollo Regional (FEDER)"
    },
    en: {
        home: "palmelita jam",
        products: "products",
        our_products: "Our Products",
        about: "about us",
        contact: "contact",
        news: "news",
        hero_title: "Master Confectioners",
        hero_subtitle: "Canary Islands - Since 1968",
        splash_welcome: "Welcome to the Natural Paradise",
        enter_site: "Enter",
        intro_title: "Tradition and Flavor",
        intro_text: "We make our jams selecting the best fresh fruits from the Canary Islands. No preservatives or colorings, just fruit and sugar to achieve an authentic taste.",
        prod_kiwi: "Kiwi",
        prod_papaya_orange: "Papaya & Orange",
        prod_papaya_orange_diet: "Papaya & Orange (Diet)",
        prod_mango: "Mango",
        prod_guayaba: "Guava",
        prod_pina: "Pineapple",
        prod_fresa: "Strawberry",
        prod_naranja: "Orange",
        prod_pimiento: "Pepper",
        prod_limon: "Lemon",
        // Footer
        footer_contact: "Contact",
        footer_distributors: "Distributors - Professionals",
        footer_legal: "Legal Conditions",
        footer_copyright: "© 2026 Palmelitas Jams / Recommended sites jam.palmelita.com",
        // Contact Page
        contact_title: "Get in touch with us by filling out the form!",
        contact_email: "CONTACT E-MAIL",
        contact_name: "NAME",
        contact_message: "COMMENT",
        contact_submit: "SEND",
        // News Page Items
        news_1_title: "Palmelita selected as local product for Madrid Fusión 2023",
        news_1_meta: "Diario de Avisos",
        news_1_date: "Wednesday, January 18, 2023",
        news_1_excerpt: "The gastronomy of Candelaria will be present at Madrid Fusión...",
        news_2_title: "Palmelita selected for Great Spanish Food Fair El Corte Inglés",
        news_2_meta: "Diario Crítico, Health and Consumption",
        news_2_date: "Wednesday, March 04, 2022",
        news_2_excerpt: "El Corte Inglés inaugurates the Great Food Fair within the framework of its 75th Anniversary...",
        news_3_title: "«From Bajamar to the heart of Europe»",
        news_3_meta: "Diario de Avisos",
        news_3_date: "Sunday, June 21, 2015",
        news_3_excerpt: "Confituras Palmelita takes the leap to Germany with high quality products...",
        news_4_title: "«Palmelita starts exporting its jams to Germany»",
        news_4_meta: "La Opinión de Tenerife",
        news_4_date: "Friday, June 19, 2015",
        news_4_excerpt: "...Confituras Palmelita was created in 1968 by master confectioner Werner Bittermann (1928-2014) in his small workshop...",
        cofinance_text: "Project co-financed by the European Regional Development Fund (ERDF)"
    },
    de: {
        home: "palmelita konfitüre",
        products: "produkte",
        our_products: "Unsere Produkte",
        about: "über uns",
        contact: "kontakt",
        news: "nachrichten",
        hero_title: "Konditormeister",
        hero_subtitle: "Kanarische Inseln - Seit 1968",
        splash_welcome: "Willkommen im Naturparadies",
        enter_site: "Eintreten",
        intro_title: "Tradition und Geschmack",
        intro_text: "Wir stellen unsere Konfitüren aus den besten frischen Früchten der Kanarischen Inseln her.",
        prod_kiwi: "Kiwi",
        prod_papaya_orange: "Papaya & Orange",
        prod_papaya_orange_diet: "Papaya & Orange (Diät)",
        prod_mango: "Mango",
        prod_guayaba: "Guave",
        prod_pina: "Ananas",
        prod_fresa: "Erdbeere",
        prod_naranja: "Orange",
        prod_pimiento: "Pfeffer",
        prod_limon: "Zitrone",
        // Footer
        footer_contact: "Kontakt",
        footer_distributors: "Vertriebspartner - Profis",
        footer_legal: "Rechtliche Hinweise",
        footer_copyright: "© 2026 Palmelitas Jams / Empfohlene Seiten jam.palmelita.com",
        // Contact Page
        contact_title: "Nehmen Sie Kontakt mit uns auf, indem Sie das Formular ausfüllen!",
        contact_email: "KONTAKT E-MAIL",
        contact_name: "NAME",
        contact_message: "KOMMENTAR",
        contact_submit: "SENDEN",
        // News Page Items
        news_1_title: "Palmelita als lokales Produkt für Madrid Fusión 2023 ausgewählt",
        news_1_meta: "Diario de Avisos",
        news_1_date: "Mittwoch, 18. Januar 2023",
        news_1_excerpt: "Die Gastronomie von Candelaria wird auf der Madrid Fusión präsent sein...",
        news_2_title: "Palmelita für die Große spanische Lebensmittelmesse El Corte Inglés ausgewählt",
        news_2_meta: "Diario Crítico, Gesundheit und Verbrauch",
        news_2_date: "Mittwoch, 04. März 2022",
        news_2_excerpt: "El Corte Inglés eröffnet die Große Lebensmittelmesse im Rahmen seines 75. Jubiläums...",
        news_3_title: "«Von Bajamar ins Herz Europas»",
        news_3_meta: "Diario de Avisos",
        news_3_date: "Sonntag, 21. Juni 2015",
        news_3_excerpt: "Confituras Palmelita wagt den Sprung nach Deutschland mit hochwertigen Produkten...",
        news_4_title: "«Palmelita beginnt mit dem Export seiner Konfitüren nach Deutschland»",
        news_4_meta: "La Opinión de Tenerife",
        news_4_date: "Freitag, 19. Juni 2015",
        news_4_excerpt: "...Confituras Palmelita wurde 1968 von Konditormeister Werner Bittermann (1928-2014) in seiner kleinen Werkstatt gegründet...",
        cofinance_text: "Projekt kofinanziert durch den Europäischen Fonds für regionale Entwicklung (EFRE)"
    },
    fr: {
        home: "confiture palmelita",
        products: "produits",
        our_products: "Nos Produits",
        about: "à propos",
        contact: "contact",
        news: "nouvelles",
        hero_title: "Maîtres Confiseurs",
        hero_subtitle: "Îles Canaries - Depuis 1968",
        splash_welcome: "Bienvenue au Paradis Naturel",
        enter_site: "Entrer",
        intro_title: "Tradition et Saveur",
        intro_text: "Nous fabriquons nos confitures en sélectionnant les meilleurs fruits frais des îles Canaries.",
        prod_kiwi: "Kiwi",
        prod_papaya_orange: "Papaye et Orange",
        prod_papaya_orange_diet: "Papaye et Orange (Régime)",
        prod_mango: "Mangue",
        prod_guayaba: "Goyave",
        prod_pina: "Ananas",
        prod_fresa: "Fraise",
        prod_naranja: "Orange",
        prod_pimiento: "Poivron",
        prod_limon: "Citron",
        // Footer
        footer_contact: "Contact",
        footer_distributors: "Distributeurs - Professionnels",
        footer_legal: "Mentions Légales",
        footer_copyright: "© 2026 Palmelitas Jams / Sites recommandés jam.palmelita.com",
        // Contact Page
        contact_title: "Contactez-nous en remplissant le formulaire !",
        contact_email: "E-MAIL DE CONTACT",
        contact_name: "NOM",
        contact_message: "COMMENTAIRE",
        contact_submit: "ENVOYER",
        // News Page Items
        news_1_title: "Palmelita sélectionnée comme produit local pour Madrid Fusión 2023",
        news_1_meta: "Diario de Avisos",
        news_1_date: "Mercredi 18 janvier 2023",
        news_1_excerpt: "La gastronomie de Candelaria sera présente à Madrid Fusión...",
        news_2_title: "Palmelita sélectionnée pour la Grande Foire Alimentaire d'Espagne El Corte Inglés",
        news_2_meta: "Diario Crítico, Santé et Consommation",
        news_2_date: "Mercredi 04 mars 2022",
        news_2_excerpt: "El Corte Inglés inaugure la Grande Foire Alimentaire dans le cadre de son 75ème anniversaire...",
        news_3_title: "«De Bajamar au cœur de l'Europe»",
        news_3_meta: "Diario de Avisos",
        news_3_date: "Dimanche 21 juin 2015",
        news_3_excerpt: "Confituras Palmelita fait le saut en Allemagne avec des produits de grande qualité...",
        news_4_title: "«Palmelita commence à exporter ses confitures en Allemagne»",
        news_4_meta: "La Opinión de Tenerife",
        news_4_date: "Vendredi 19 juin 2015",
        news_4_excerpt: "...Confituras Palmelita a été créée en 1968 par le maître pâtissier Werner Bittermann (1928-2014) dans son petit atelier...",
        cofinance_text: "Projet cofinancé par le Fonds Européen de Développement régional (FEDER)"
    }
};

document.addEventListener("DOMContentLoaded", () => {
  const langBtns = document.querySelectorAll(".lang-btn");

  langBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.id.split("-")[1];
      setLanguage(lang);

      // Update active state
      langBtns.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");
    });
  });

  // Default to ES
  setLanguage("es");
  document.getElementById("lang-es").classList.add("active");
  // Lightbox Logic
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const closeBtn = document.querySelector(".close-lightbox");
  const productImages = document.querySelectorAll(".product-image img");

  productImages.forEach((img) => {
    img.addEventListener("click", () => {
      lightbox.style.display = "flex";
      lightboxImg.src = img.src;
    });
  });

  if (closeBtn) {
    closeBtn.addEventListener("click", () => {
      lightbox.style.display = "none";
    });
  }

  if (lightbox) {
      lightbox.addEventListener("click", (e) => {
        if (e.target !== lightboxImg) {
            lightbox.style.display = "none";
        }
      });
  }

  // Hamburger Menu Logic
  const hamburger = document.getElementById("hamburger");
  const navLinks = document.getElementById("nav-links");

  if (hamburger && navLinks) {
      hamburger.addEventListener("click", () => {
          navLinks.classList.toggle("active");
          hamburger.classList.toggle("active");
      });
  }

  // Reveal Products Logic (Index Page)
  const revealBtn = document.getElementById("reveal-products-btn");
  const revealSection = document.getElementById("products-reveal-section");

  // Function to reveal
  const revealProducts = (e) => {
    if (revealSection) {
        if(e) e.preventDefault();
        revealSection.classList.add("visible");
        // Smooth scroll to the section
        setTimeout(() => {
            revealSection.scrollIntoView({ behavior: "smooth", block: "start" });
        }, 100);
    }
  };

  if (revealBtn) {
      revealBtn.addEventListener("click", revealProducts);
  }

  // Also enable "Products" link in nav to trigger reveal ONLY on index.html
  const productLinks = document.querySelectorAll('a[href="productos.html"]'); // Selector might need adjustment if href is different
  
  // If we are on index.html, hijack the link
  if (document.getElementById("products-reveal-section")) {
      productLinks.forEach(link => {
          // If the link text is "products" or similar data-i18n
          if(link.getAttribute("data-i18n") === "products" || link.textContent.toLowerCase().includes("products") || link.textContent.toLowerCase().includes("productos")) {
              link.addEventListener("click", (e) => {
                  e.preventDefault();
                  revealProducts();
                  // Close mobile menu if open
                  if(navLinks && navLinks.classList.contains("active")) {
                      navLinks.classList.remove("active");
                      hamburger.classList.remove("active");
                  }
              });
          }
      });
  }

});

function setLanguage(lang) {
  const elements = document.querySelectorAll("[data-i18n]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
}
